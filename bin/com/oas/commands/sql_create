CREATE TABLE USER_MASTER(
 UID INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1 , INCREMENT BY 1), 
 NAME VARCHAR(50) NOT NULL,
 DOB DATE NOT NULL  CHECK(DOB >= DATE('1998-01-01')), 
 EMAIL VARCHAR(50) NOT NULL,
 USER_NAME VARCHAR(20) NOT NULL,
 PASSWORD VARCHAR(50) NOT NULL, 
 ADDRESS VARCHAR(50) NOT NULL, 
 USER_TYPE VARCHAR(10) NOT NULL, 
 WALLET_AMOUNT DECIMAL(10,2) NOT NULL);
 
CREATE TABLE CATEGORY_MASTER (
 CATEGORY_ID INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1 , INCREMENT BY 1) ,
 CATEGORY_NAME VARCHAR(20) NOT NULL,
 DESCRIPTION VARCHAR(100) NOT NULL);

CREATE TABLE PRODUCT_MASTER(
 PRODUCT_ID INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1 , INCREMENT BY 1),
 PRODUCT_NAME VARCHAR(20), 
 CATEGORY_ID INT , FOREIGN KEY(CATEGORY_ID) REFERENCES CATEGORY(CATEGORY_ID),
 DESCRIPTION VARCHAR(100) NOT NULL , 
 PRICE DECIMAL(10,2) NOT NULL,
 QUANTITY INT NOT NULL ,
 SELLER_ID INT CONSTRAINT IDS_CK CHECK(USERTYPE = 'SELLER'), FOREIGN KEY(USER_ID) REFERENCES USER_MASTER(USER_ID) );  

CREATE TABLE AUCTION_MASTER(
 SEQ_NO INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1 , INCREMENT BY 1),
 MIN_BID_VALUE DECIMAL(10,2) ,
 BID_START_DATE DATE ,
 BID_END_DATE DATE ,
 USER_ID INT CONSTRAINT IDB_CK CHECK(USERTYPE = 'BUYER') ,FOREIGN KEY(USER_ID) REFERENCES USER_MASTER(USER_ID) ,
 SOLD_PRICE DECIMAL(10,2) , 
 STATUS VARCHAR(20) CONSTRAINT STATUS_CK CHECK(STATUS = 'NEWAUCTION' OR STATUS = 'OPEN' OR STATUS = 'AUCTIONCLOSED' OR STATUS = 'SOLD'));  

CREATE TABLE BID_MASTER(
 BID_ID INT PRIMARY KEY GENERATED ALWAYS AS IDENTITY (START WITH 1 , INCREMENT BY 1),
 USER_ID INT, FOREIGN KEY(USER_ID) REFERENCES USER_MASTER(USER_ID),
 PRODUCT_ID INT ,FOREIGN KEY(PRODUCT_ID) REFERENCES CATEGORY(PRODUCT_ID),
 BID_VALUE DECIMAL(10,2) NOT NULL , 
 STATUS VARCHAR(20) CONSTRAINT STATUS_CK CHECK( STATUS = 'OPEN' OR STATUS = 'LOST' OR STATUS = 'WON'));  
  
  